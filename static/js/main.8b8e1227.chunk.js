(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAOhSURBVGhD7ZdNTBNBFMdfqBIixqBRb0rAgCIGY5REYxEvCgegLaF8iFJCDEYJla9gAtRC4ql48e7BcIIY4SQxMRw8GDQePCsg30gISpV+wLLsOG+dLgLTLl2KhWR/yT+78zKz83/zXtst6OjobA9Dj9eCYsMto3VdZOmS4g3di1MovGdRdbSuizQxPZ4WQ4+HoPCehVXRuk4ToUpNDQwHjOA9CytUOjoJig0V1NYhkWkxlVLT+OSakcUJFlYImoDKuoi1mFqpaTwXDcjq9uSwsEKICoRcF7EWow9QLXUogiWgxnb3VVAt9T8sJ9tt4tmGfiG59rM/oWrcZ7g1695fRhb2lRI3FM/NgeX7GJjGJsDSPwOFd9gyLuHsGxL6gJCl9p9sTBLSGgZWL7euSMbHZOnYXeKFkqD6BVbyDUzkC+STYShYmQDz2ykoOcEep6C277YhibY4Ia3xjWR0SuR6B0Hz/vgKrumNWoRiMgIFchKor5Av0URej0J2HHv8zuI/VZsrZrb40PhftZOlw1Vcs8FEW4oaX0sCNQIm7zRYbrBtdgYhxd5CT1s+9YBWUuu4JtU0C4XrEkBhNaahsJltF1mo0SfkWrtiXFZ2B/HF3eYaVJOHamhDFVgShFainW0bGcSUh/ZN5qnEc01cc1sVrwqBJCbBco9tvz2EJHumdNWxutE8Ktze36hgVUDR+OoMWDKZDW0QcMaIFx7N88yTLCfxxpRxjYWjSTBzE0CNgmmOWdGGcLr+Bdc8lZjRzDUUruahiGs+INpKz5md8FhKtqcEvud5EhJruIbCFbYR9jzPPJM0BkVJzNbWWUlvHOQZD2jpeDXXkBbRVwyecUXjYH7PbG0NKakmVcoKfvoo/0Eb14wWBfs2Cgh/HyahMIXZU0dIq+tdvdIm4lVIthvlVwd6DcQxAV9sOd28+CeVywvWiwTyDqC8UHqJxjqpsYU1k6Hn/WCfgyHIF+lp906D1YivFnjFMcanwPyS2VNHPFPfR1Krj7LhOjAuZjQNeQ2lXQtgSmDhTbih6Mi79Ptk4PwDojbPDdY+2kZDvyGPuyfG6VvsKzb8f2j9P7Br0BOINnoC0UZPINroCUQbPYFos6cSsDk6P1GzH9lQZk8lUNnWuYxmrU5nLI5tTmecnACNyxN2O3j6aNjW5nKUO58dohVpZ+MPbMruptLxNKfS4ZLkU1fkkipaXTfZlN2PrdWViydOtUjND+4p8zo6OtEA4A8KIgwX2lN8gQAAAABJRU5ErkJggg=="},23:function(e,t,n){e.exports=n(60)},29:function(e,t,n){},59:function(e,t){},60:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(19),s=n.n(r),o=(n(29),n(3)),l=n(4),c=n(6),m=n(5),u=n(7),v=n(20),h=n.n(v),p=n(21),d=n.n(p),f=n(1),E=n.n(f),g=n(22),D=n.n(g),S=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).state={shouldNotify:n.setShouldNotify()},n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"createNotification",value:function(e){window.Notification&&"denied"!==Notification.permission&&Notification.requestPermission(function(t){var n={body:e,icon:D.a};return new Notification("Reminder:",n)})}},{key:"componentDidMount",value:function(){this.state.shouldNotify&&this.createNotification(this.props.eventName)}},{key:"componentDidUpdate",value:function(e){this.props.now!==e.now&&this.setState({shouldNotify:this.setShouldNotify()})}},{key:"setShouldNotify",value:function(){var e=this.props.now,t=this.props.nextMoment,n=t.diff(e,"minutes");return t.diff(e,"seconds")>0&&n<=5}},{key:"render",value:function(){return i.a.createElement("li",{className:this.state.shouldNotify?"event should_notify":"event"},i.a.createElement("div",{className:"event_name"},i.a.createElement("div",{className:"left_column column"},i.a.createElement("span",null,"to do: ")),i.a.createElement("div",{className:"right_column column"},i.a.createElement("span",null,this.props.eventName))),i.a.createElement("div",{className:"event_time"},i.a.createElement("div",{className:"left_column column"},i.a.createElement("span",null,"prev: ")),i.a.createElement("div",{className:"right_column column"},i.a.createElement("span",null,this.props.prevDate),i.a.createElement("span",null,"@ ",this.props.prevTime))),i.a.createElement("div",{className:"event_time"},i.a.createElement("div",{className:"left_column column"},i.a.createElement("span",null,"next: ")),i.a.createElement("div",{className:"right_column column"},i.a.createElement("span",null,this.props.nextDate),i.a.createElement("span",null,"@ ",this.props.nextTime))),i.a.createElement("div",{className:"time_left"},i.a.createElement("div",{className:"left_column column"},i.a.createElement("span",null,"time left: ")),i.a.createElement("div",{className:"right_column column"},i.a.createElement("span",null,this.props.next))),i.a.createElement("hr",null))}}]),t}(i.a.Component),N=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"renderEvents",value:function(e){var t=this;return e.map(function(e,n){return i.a.createElement(S,{key:n,eventName:e.name,now:t.props.now,nextMoment:E()(e.timeData.timeStrings.next),next:E()(e.timeData.timeStrings.next).fromNow(),prevTime:e.timeData.timeStrings.prevTime,prevDate:e.timeData.timeStrings.prevDate,nextTime:e.timeData.timeStrings.nextTime,nextDate:e.timeData.timeStrings.nextDate})})}},{key:"renderSchedule",value:function(e){return e.length?i.a.createElement("ol",null,this.renderEvents(e)):i.a.createElement("div",{className:"schedule_error"},i.a.createElement("p",null,this.props.errorMsg))}},{key:"render",value:function(){return i.a.createElement("div",{className:"schedule_container"},i.a.createElement("div",{className:"schedule_title"},i.a.createElement("h3",null,this.props.title)),i.a.createElement("div",{className:"schedule"},this.renderSchedule(this.props.schedule)))}}]),t}(i.a.Component),b=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).state={now:E()(),allEvents:[],prevEvents:[],upcomingEvents:[]},n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"initScheduler",value:function(){var e=this;h.a.get("https://scheduler-challenge.grove.co/").then(function(t){e.setEventsState(t)}).catch(function(e){console.log(e)})}},{key:"setEventsState",value:function(e){var t=e.data.data,n=this.setEventProps(t),a=this.sortEventsByDate(n),i=this.filterPrevEvents(a),r=this.filterUpcomingEvents(a);this.setState({allEvents:a}),this.setState({prevEvents:i}),this.setState({upcomingEvents:r})}},{key:"setEventProps",value:function(e){for(var t=[],n=0;n<e.length;n++){var a={id:e[n].id,type:e[n].type,name:e[n].attributes.name,timeData:{cron:e[n].attributes.cron,cronObjs:{cronObj:null,prevObj:null,nextObj:null},timeStrings:{prev:null,prevTime:null,prevDate:null,next:null,nextTime:null,nextDate:null}}};a.timeData.cronObjs.cronObj=d.a.parseExpression(a.timeData.cron),a.timeData.cronObjs.prevObj=a.timeData.cronObjs.cronObj.prev(),a.timeData.cronObjs.nextObj=a.timeData.cronObjs.cronObj.next(),a.timeData.timeStrings.prev=a.timeData.cronObjs.prevObj.toString(),a.timeData.timeStrings.prevTime=E()(a.timeData.timeStrings.prev).format("LT"),a.timeData.timeStrings.prevDate=E()(a.timeData.timeStrings.prev).format("LL"),a.timeData.timeStrings.next=a.timeData.cronObjs.nextObj.toString(),a.timeData.timeStrings.nextTime=E()(a.timeData.timeStrings.next).format("LT"),a.timeData.timeStrings.nextDate=E()(a.timeData.timeStrings.next).format("LL"),t.push(a)}return t}},{key:"sortEventsByDate",value:function(e){return e.sort(function(e,t){return new Date(e.timeData.timeStrings.next)-new Date(t.timeData.timeStrings.next)})}},{key:"filterPrevEvents",value:function(e){var t=this.state.now;return e.filter(function(e){var n=E()(e.timeData.timeStrings.next),a=n.diff(t,"hours");return n.diff(t,"seconds")<=0&&a>=-3})}},{key:"filterUpcomingEvents",value:function(e){var t=this.state.now;return e.filter(function(e){var n=E()(e.timeData.timeStrings.next),a=n.diff(t,"hours");return n.diff(t,"seconds")>0&&a<=24})}},{key:"componentDidMount",value:function(){var e=this;this.initScheduler(),setInterval(function(){e.refreshStates()},1e3)}},{key:"refreshStates",value:function(){var e=this.filterPrevEvents(this.state.allEvents),t=this.filterUpcomingEvents(this.state.allEvents);this.setState({now:E()()}),this.setState({prevEvents:e}),this.setState({upcomingEvents:t})}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("div",{className:"scheduler_container"},i.a.createElement(N,{title:"Previous Events (last 3 hours)",schedule:this.state.prevEvents,errorMsg:"For the last 3 hours, you have accomplished nothing in your life.",now:this.state.now}),i.a.createElement(N,{title:"Upcoming Events (next 24 hours)",schedule:this.state.upcomingEvents,errorMsg:"Sit back & relax for the next 24 hours.",now:this.state.now}),i.a.createElement(N,{title:"All Events",schedule:this.state.allEvents,errorMsg:"You do not have any events scheduled!",now:this.state.now})))}}]),t}(i.a.Component);var A=function(){return i.a.createElement("div",null,i.a.createElement("h1",null,"Tom's Scheduler App"),i.a.createElement(b,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(A,null),document.getElementById("scheduler_app")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[23,1,2]]]);
//# sourceMappingURL=main.8b8e1227.chunk.js.map